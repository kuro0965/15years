<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¸ƒå¤•ã®é¡˜ã„äº‹ - 15å¹´å¾Œã«å±Šãæ‰‹ç´™</title>
  <style>
    body {
      font-family: 'Helvetica', sans-serif;
      background: linear-gradient(to bottom, #00111a, #000);
      color: white;
      text-align: center;
      padding: 50px;
    }

    textarea {
      width: 80%;
      height: 100px;
      font-size: 16px;
      padding: 10px;
      border-radius: 10px;
      border: none;
      resize: none;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      background: #00aaff;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .message {
      margin-top: 30px;
      font-size: 20px;
      color: #aaffee;
    }
  </style>
</head>
<body>
  <h1> ç¹”å§«ã®é¡˜ã„äº‹ </h1>
  <p>é¡˜ã„äº‹ã‚’æ›¸ã„ã¦é€ä¿¡ã™ã‚‹ã¨ã€15å¹´å¾Œã«å½¦æ˜Ÿã«å±Šãã¾ã™ğŸŒŒ</p>

  <textarea id="wishInput" placeholder="ã‚ãªãŸã®é¡˜ã„ã”ã¨ã‚’æ›¸ã„ã¦ãã ã•ã„..."></textarea>
  <br>
  <button onclick="sendWish()">é€ä¿¡ã™ã‚‹</button>

  <div class="message" id="message"></div>

  <script>
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒã‚§ãƒƒã‚¯
    window.onload = function() {
      const saved = localStorage.getItem('tanabataWish');
      const messageBox = document.getElementById('message');
  
      if (saved) {
        const wishData = JSON.parse(saved);
        const arrivalDate = new Date(wishData.arrivesAt);
        const now = new Date();
  
        if (now >= arrivalDate) {
          // é¡˜ã„ãŒå±Šã„ãŸã‚ã¨
          const replyYear = arrivalDate.getFullYear() + 15;
          messageBox.innerHTML = `ğŸŒ  ã‚ãªãŸã®é¡˜ã„äº‹ã¯å½¦æ˜Ÿã«å±Šãã¾ã—ãŸï¼<br>
          <strong>${replyYear}å¹´ã®ä¸ƒå¤•</strong>ã«è¿”ä¿¡ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“â€¦âœ¨`;
        } else {
          // ã¾ã å±Šã„ã¦ãªã„é€”ä¸­
          const remainYears = arrivalDate.getFullYear() - now.getFullYear();
          messageBox.innerHTML = `ğŸ›°ï¸ é¡˜ã„äº‹ã¯ç¾åœ¨ã€å®‡å®™ã‚’æ—…ã—ã¦ã„ã¾ã™â€¦<br>
          <strong>${wishData.arrivesAt}</strong> ã«å½¦æ˜Ÿã«å±Šãäºˆå®šã§ã™`;
        }
      }
    };
  
    function sendWish() {
      const wish = document.getElementById('wishInput').value.trim();
      const messageBox = document.getElementById('message');
  
      if (!wish) {
        messageBox.textContent = 'é¡˜ã„äº‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ âœ¨';
        return;
      }
  
      const now = new Date();
      const arrivalYear = now.getFullYear() + 15;
  
      const savedWish = {
        wish: wish,
        created: now.toISOString(),
        arrivesAt: `${arrivalYear}-07-07`
      };
  
      localStorage.setItem('tanabataWish', JSON.stringify(savedWish));
  
      messageBox.innerHTML = `âœ¨ ã‚ãªãŸã®é¡˜ã„äº‹ã¯å®‡å®™ã‚’æ—…ã—ã¦ã„ã¾ã™â€¦<br>
      <strong>${arrivalYear}å¹´ã®ä¸ƒå¤•</strong>ã«å½¦æ˜Ÿã«å±Šãäºˆå®šã§ã™ ğŸŒ `;
  
      document.getElementById('wishInput').value = '';
    }
  </script>
</body>
</html>
